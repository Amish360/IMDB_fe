{"ast":null,"code":"import _defineProperty from \"/home/amishtoor/DjangoProjects/IMDB/imdb_clone/imdb_front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/amishtoor/DjangoProjects/IMDB/imdb_clone/imdb_front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/amishtoor/DjangoProjects/IMDB/imdb_clone/imdb_front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/amishtoor/DjangoProjects/IMDB/imdb_clone/imdb_front/src/components/Userprofiles/Editprofile.js\";\nimport React, { useState, useEffect } from 'react';\nfunction EditProfile() {\n  var _useState = useState({\n      country: '',\n      age: ''\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    formData = _useState2[0],\n    setFormData = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    error = _useState4[0],\n    setError = _useState4[1];\n  useEffect(function () {\n    // Fetch user profile data from the Django API\n    fetch('/api/get_user_profile/', {\n      headers: {\n        Authorization: \"Bearer \".concat(localStorage.getItem('jwtToken')) // Get the JWT token from localStorage\n      }\n    }).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      return setFormData({\n        country: data.country,\n        age: data.age\n      });\n    }).catch(function (error) {\n      return console.error('Error fetching user profile:', error);\n    });\n  }, []);\n  var handleInputChange = function handleInputChange(event) {\n    var _event$target = event.target,\n      name = _event$target.name,\n      value = _event$target.value;\n    setFormData(_objectSpread({}, formData, _defineProperty({}, name, value)));\n  };\n  var handleSaveProfile = function handleSaveProfile(event) {\n    event.preventDefault();\n    // Send a PUT request to update user profile\n    fetch('http://127.0.0.1:8000/api/update_user_profile/', {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: \"Bearer \".concat(localStorage.getItem('jwtToken')) // Include JWT token\n      },\n\n      body: JSON.stringify(formData)\n    }).then(function (response) {\n      if (response.status === 204) {\n        alert('Profile updated successfully');\n        // Redirect to the UserProfile page\n        window.location.href = '/userDetails'; // Use window.location to redirect\n      } else {\n        setError('Error updating profile');\n      }\n    }).catch(function (error) {\n      return console.error('Error updating profile:', error);\n    });\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, \"Edit Profile\"), error && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }, error), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSaveProfile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, \"Country:\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"country\",\n    value: formData.country,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, \"Age:\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    name: \"age\",\n    value: formData.age,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, \"Email Notifications:\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    name: \"notifications\",\n    value: formData.choice,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, \"Save Profile\")));\n}\nexport default EditProfile;","map":{"version":3,"names":["React","useState","useEffect","EditProfile","_useState","country","age","_useState2","_slicedToArray","formData","setFormData","_useState3","_useState4","error","setError","fetch","headers","Authorization","concat","localStorage","getItem","then","response","json","data","catch","console","handleInputChange","event","_event$target","target","name","value","_objectSpread","_defineProperty","handleSaveProfile","preventDefault","method","body","JSON","stringify","status","alert","window","location","href","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onChange","choice"],"sources":["/home/amishtoor/DjangoProjects/IMDB/imdb_clone/imdb_front/src/components/Userprofiles/Editprofile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nfunction EditProfile() {\n  const [formData, setFormData] = useState({ country: '', age: '' });\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    // Fetch user profile data from the Django API\n    fetch('/api/get_user_profile/', {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('jwtToken')}`, // Get the JWT token from localStorage\n      },\n    })\n      .then(response => response.json())\n      .then(data => setFormData({ country: data.country, age: data.age }))\n      .catch(error => console.error('Error fetching user profile:', error));\n  }, []);\n\n  const handleInputChange = event => {\n    const { name, value } = event.target;\n    setFormData({ ...formData, [name]: value });\n  };\n\n  const handleSaveProfile = event => {\n    event.preventDefault();\n    // Send a PUT request to update user profile\n    fetch('http://127.0.0.1:8000/api/update_user_profile/', {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${localStorage.getItem('jwtToken')}`, // Include JWT token\n      },\n      body: JSON.stringify(formData),\n    })\n      .then(response => {\n        if (response.status === 204) {\n          alert('Profile updated successfully');\n          // Redirect to the UserProfile page\n          window.location.href = '/userDetails'; // Use window.location to redirect\n        } else {\n          setError('Error updating profile');\n        }\n      })\n      .catch(error => console.error('Error updating profile:', error));\n  };\n\n  return (\n    <div>\n      <h1>Edit Profile</h1>\n      {error && <p>{error}</p>}\n      <form onSubmit={handleSaveProfile}>\n        <label>\n          Country:\n          <input type=\"text\" name=\"country\" value={formData.country} onChange={handleInputChange} />\n        </label>\n        <br />\n        <label>\n          Age:\n          <input type=\"number\" name=\"age\" value={formData.age} onChange={handleInputChange} />\n        </label>\n        <br />\n        <label>\n          Email Notifications:\n          <input type=\"checkbox\" name=\"notifications\" value={formData.choice} onChange={handleInputChange} />\n        </label>\n        <button type=\"submit\">Save Profile</button>\n      </form>\n    </div>\n  );\n}\n\nexport default EditProfile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}